<?xml version="1.0" encoding="UTF-8" ?>
<project name="transportation_hub" id="Project-1abb" database="Snowflake" >
	<schema name="HUB" catalogname="TRANSPORTATION_HUB" >
		<table name="MESSAGE" prior="TABLE" >
			<column name="MESSAGE_UID" prior="MESSAGEID" type="integer" jt="4" mandatory="y" >
				<defo><![CDATA[MESSAGE_SEQ.NEXTVAL]]></defo>
			</column>
			<column name="MESSAGE_ID" type="integer" jt="4" />
			<column name="SIGN_MESSAGE" type="varchar" length="50" jt="12" />
			<column name="SIGN_MESSAGE_LONG" type="varchar" length="100" jt="12" />
			<index name="PK_MESSAGE_MESSAGEID" unique="PRIMARY_KEY" >
				<column name="MESSAGE_UID" />
			</index>
		</table>
		<table name="ROUTE" prior="TABLE" >
			<column name="ROUTE_UID" prior="ROUTEID" type="integer" jt="4" mandatory="y" >
				<defo><![CDATA[ROUTE_SEQ.NEXTVAL]]></defo>
			</column>
			<column name="ROUTE_ID" type="integer" jt="4" >
				<comment><![CDATA["routeNumber" in JSON dataset]]></comment>
			</column>
			<column name="ROUTE_TYPE" type="varchar" length="10" jt="12" />
			<column name="ROUTE_SUB_TYPE" type="varchar" length="20" jt="12" />
			<column name="ROUTE_COLOR" type="varchar" length="6" jt="12" />
			<column name="FREQUENT_SERVICE" type="boolean" jt="16" />
			<column name="ROUTE_DESC" type="varchar" length="50" jt="12" />
			<index name="PK_ROUTE_ROUTENUMBER" unique="PRIMARY_KEY" >
				<column name="ROUTE_UID" />
			</index>
		</table>
		<table name="VEHICLE" >
			<column name="VEHICLE_UID" prior="VEHICLEID" type="integer" jt="4" mandatory="y" >
				<defo><![CDATA[VEHICLE_SEQ.NEXTVAL]]></defo>
			</column>
			<column name="VEHICLE_ID" type="integer" jt="4" />
			<column name="VEHICLE_TYPE" type="varchar" length="10" jt="12" />
			<index name="PK_VEHICLE_VEHICLEID" unique="PRIMARY_KEY" >
				<column name="VEHICLE_UID" />
			</index>
			<pre_script><![CDATA[CREATE OR REPLACE SEQUENCE VEHICLE_SEQ START WITH 1 INCREMENT BY 1]]></pre_script>
		</table>
		<table name="VEHICLE_POSITION" prior="TABLE" >
			<column name="VEHICLE_POSITION_UID" prior="ID" type="integer" jt="4" mandatory="y" >
				<defo><![CDATA[VEHICLE_POSITION_SEQ.NEXTVAL]]></defo>
			</column>
			<column name="VEHICLE_UID" prior="VEHICLEID" type="integer" jt="4" />
			<column name="DATETIME" prior="DATE" type="datetime" jt="91" />
			<column name="LATITUDE" type="float" jt="6" />
			<column name="LONGITUDE" type="float" jt="6" />
			<column name="ROUTE_UID" prior="ROUTEID" type="integer" jt="4" />
			<column name="TRIP_ID" prior="TRIPID" type="integer" jt="4" />
			<column name="LAST_LOC_ID" prior="LAST_LOCID" type="integer" jt="4" />
			<column name="NEXT_LOC_ID" prior="NEXT_LOCID" type="integer" jt="4" />
			<column name="LAST_STOP_SEQ" type="integer" jt="4" />
			<column name="NEXT_STOP_SEQ" type="integer" jt="4" />
			<column name="IN_CONGESTION" type="boolean" jt="16" />
			<column name="OFF_ROUTE" type="boolean" jt="16" />
			<column name="MESSAGE_UID" prior="MESSAGEID" type="integer" jt="4" />
			<index name="PK_VEHICLE_POSITION_ID" unique="PRIMARY_KEY" >
				<column name="VEHICLE_POSITION_UID" />
			</index>
			<fk name="FK_VEHICLE_POSITION_VEHICLE" to_schema="TRANSPORTATION_HUB.HUB" to_table="VEHICLE" >
				<fk_column name="VEHICLE_UID" pk="VEHICLE_UID" />
			</fk>
			<fk name="FK_VEHICLE_POSITION_ROUTE" to_schema="TRANSPORTATION_HUB.HUB" to_table="ROUTE" >
				<fk_column name="ROUTE_UID" pk="ROUTE_UID" />
			</fk>
			<fk name="FK_VEHICLE_POSITION_MESSAGE" to_schema="TRANSPORTATION_HUB.HUB" to_table="MESSAGE" >
				<fk_column name="MESSAGE_UID" pk="MESSAGE_UID" />
			</fk>
		</table>
	</schema>
	<schema name="PUBLIC" catalogname="TRANSPORTATION_HUB" />
	<schema name="STAGING" catalogname="TRANSPORTATION_HUB" >
		<table name="ROUTE_STAGING" prior="TABLE" >
			<column name="ROUTECOLOR" type="varchar" jt="12" />
			<column name="FREQUENTSERVICE" type="boolean" jt="16" />
			<column name="ROUTE" type="integer" jt="4" />
			<column name="DETOUR" type="boolean" jt="16" />
			<column name="ROUTESUBTYPE" type="varchar" jt="12" />
			<column name="ID" type="integer" jt="4" />
			<column name="TYPE" type="varchar" jt="12" />
			<column name="DESC" type="varchar" jt="12" />
			<column name="ROUTESORTORDER" type="integer" jt="4" />
		</table>
		<table name="VEHICLE_STAGING" prior="TABLE" >
			<comment><![CDATA[transforms JSON from S3 external stage to staging table]]></comment>
			<column name="BEARING" type="integer" jt="4" />
			<column name="BLOCKID" type="integer" jt="4" />
			<column name="DELAY" type="integer" jt="4" />
			<column name="EXPIRES" type="datetime" jt="91" />
			<column name="EXTRABLOCKID" prior="EXTRA_BLOCKID" type="integer" jt="4" />
			<column name="GARAGE" type="varchar" length="10" jt="12" />
			<column name="IN_CONGESTION" type="boolean" jt="16" />
			<column name="LASTLOCID" prior="LAST_LOCID" type="integer" jt="4" />
			<column name="LASTSTOPSEQ" prior="LAST_STOP_SEQ" type="integer" jt="4" />
			<column name="LATITUDE" type="float" jt="6" />
			<column name="LOADPERCENTAGE" prior="LOAD_PERCENTAGE" type="integer" jt="4" />
			<column name="LOCATIONINSCHEDULEDAY" prior="LOCATION_IN_SCHEDULE_DAY" type="integer" jt="4" />
			<column name="LONGITUDE" type="float" jt="6" />
			<column name="MESSAGECODE" prior="MESSAGE_CODE" type="integer" jt="4" />
			<column name="NEWTRIP" prior="NEW_TRIP" type="boolean" jt="16" />
			<column name="NEXTLOCID" prior="NEXT_LOCID" type="integer" jt="4" />
			<column name="NEXTSTOPSEQ" prior="NEXT_STOP_SEQ" type="integer" jt="4" />
			<column name="OFFROUTE" prior="OFF_ROUTE" type="boolean" jt="16" />
			<column name="ROUTECOLOR" prior="COLOR" type="varchar" length="6" jt="12" />
			<column name="ROUTENUMBER" prior="ROUTE_NUMBER" type="integer" jt="4" />
			<column name="ROUTESUBTYPE" prior="ROUTE_SUB_TYPE" type="varchar" length="20" jt="12" />
			<column name="SERVICEDATE" prior="SERVICE_DATE" type="datetime" jt="91" />
			<column name="SIGNMESSAGE" prior="SIGN_MESSAGE" type="varchar" length="50" jt="12" />
			<column name="SIGNMESSAGELONG" prior="SIGN_MESSAGE_LONG" type="text" length="100" jt="12" />
			<column name="SOURCE" type="varchar" length="5" jt="12" />
			<column name="TIME" type="datetime" jt="91" />
			<column name="TRIPID" type="integer" jt="4" />
			<column name="VEHICLETYPE" prior="VEHICLE_TYPE" type="varchar" length="10" jt="12" >
				<comment><![CDATA["type" from JSON dataset]]></comment>
			</column>
			<column name="VEHICLEID" type="integer" jt="4" />
		</table>
	</schema>
	<layout name="Default Layout" id="Layout-ac3" show_relation="columns" >
		<entity schema="TRANSPORTATION_HUB.HUB" name="MESSAGE" color="C1D8EE" x="560" y="336" />
		<entity schema="TRANSPORTATION_HUB.HUB" name="ROUTE" color="C1D8EE" x="576" y="160" />
		<entity schema="TRANSPORTATION_HUB.STAGING" name="ROUTE_STAGING" color="EEC1C1" x="288" y="48" />
		<entity schema="TRANSPORTATION_HUB.HUB" name="VEHICLE" color="C1D8EE" x="608" y="48" />
		<entity schema="TRANSPORTATION_HUB.HUB" name="VEHICLE_POSITION" color="CAEEC1" x="1024" y="96" />
		<entity schema="TRANSPORTATION_HUB.STAGING" name="VEHICLE_STAGING" color="EEC1C1" x="48" y="48" />
	</layout>
</project>